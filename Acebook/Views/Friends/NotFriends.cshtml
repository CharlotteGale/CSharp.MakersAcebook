<div class="friends-container">

    <div class="friends-header">
        <h1 class="friends-title">Suggested Friends</h1>

        <div class="friends-nav">
            <a asp-action="Index" class="friends-link">Friends</a>
            <a asp-action="requests" class="friends-link">Requests</a>
        </div>
    </div>

    <ul class="friends-list">
        @{
            bool hasFriendSuggestions = false;
            var pendingIds = ViewBag.Pending as HashSet<int> ?? new HashSet<int>();
        }

        @if (ViewBag.NotFriends != null)
        {
            foreach (var newFriend in (List<acebook.Models.User>)ViewBag.NotFriends)
            {
                if (!pendingIds.Contains(newFriend.Id))
                {
                    hasFriendSuggestions = true;

                    <li class="friend-item">

                        <div class="friend-info">
                            <div class="friend-header d-flex align-items-center">
                                <div class="profile-icon">@newFriend.Name?.FirstOrDefault()</div>
                                <span class="friend-name ms-2">@newFriend.Name</span>
                            </div>

                            <span class="friend-email friend-email-offset">@newFriend.Email</span>
                        </div>

                        <form action="/friends/not_friends_yet" method="post">
                            <input type="hidden" name="profileId" value="@newFriend.Id" />
                            <button class="friend-add-btn">Add Friend</button>
                        </form>

                    </li>
                }
            }
        }
    <ul class="friends-list">
        @{
            bool hasFriendSuggestions = false;
            var pendingIds = ViewBag.Pending as HashSet<int> ?? new HashSet<int>();
        }

        @if (ViewBag.NotFriends != null)
        {
            foreach (var newFriend in (List<acebook.Models.User>)ViewBag.NotFriends)
            {
                if (!pendingIds.Contains(newFriend.Id))
                {
                    hasFriendSuggestions = true;

                    <li class="friend-item">

                        <div class="friend-info">
                            <div class="friend-header d-flex align-items-center">
                                <div class="profile-icon">@newFriend.Name?.FirstOrDefault()</div>
                                <span class="friend-name ms-2">@newFriend.Name</span>
                            </div>

                            <span class="friend-email friend-email-offset">@newFriend.Email</span>
                        </div>

                        <form action="/friends/not_friends_yet" method="post">
                            <input type="hidden" name="profileId" value="@newFriend.Id" />
                            <button class="friend-add-btn">Add Friend</button>
                        </form>

                    </li>
                }
            }
        }

        @if (!hasFriendSuggestions)
        {
            <li class="no-friends-placeholder">
                You're friends with everyone â€” look at you go.
            </li>
        }
    </ul>

</div>
